server.port=8080
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
frontend.url=${FRONTEND_URL}
google.gemini.api_key=${GEMINI_API_KEY}
resend.api.key=${RESEND_API_KEY}


# 3️⃣ Hikari 連線池設定 (最佳化啟動速度)
spring.datasource.hikari.pool-name=HikariCP
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.initialization-fail-timeout=10000

# 4️⃣ Hibernate 設定

spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=true

# 5️⃣ Logging 最小化 (減少啟動慢)
logging.level.org.hibernate.SQL=warn
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=warn
logging.level.com.zaxxer.hikari=info

# 6️⃣ JPA Repository 設定
spring.data.jpa.repositories.bootstrap-mode=lazy

# 7️⃣ Optional: 減少 Spring Boot classpath 掃描延遲
spring.main.lazy-initialization=true

# 不用指定 dialect，Hibernate 自動選
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# 第二級快取關閉（避免額外初始化慢）
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.generate_statistics=false